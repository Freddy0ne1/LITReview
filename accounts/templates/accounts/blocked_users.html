{% extends "core/base.html" %}
{% block title %}Utilisateurs bloquÃ©s | LITReview{% endblock %}

{% block content %}

<div class="max-w-4xl mx-auto">

    <h1 class="text-3xl font-bold text-gray-900 mb-8">Utilisateurs bloquÃ©s</h1>

    {% if blocked_users %}
        <div class="space-y-4">
            {% for block in blocked_users %}
                <article class="bg-white rounded-lg shadow-md p-4 flex items-center justify-between hover:shadow-lg transition-shadow duration-200">

                    <!-- Informations utilisateur -->
                    <div class="flex items-center gap-3">
                        {% if block.blocked_user.profile_photo %}
                            <img
                                src="{{ block.blocked_user.profile_photo.url }}"
                                alt="Photo de profil de {{ block.blocked_user.username }}"
                                class="w-12 h-12 rounded-full object-cover border-2 border-gray-200 grayscale">
                        {% else %}
                            <div
                                class="w-12 h-12 rounded-full bg-gray-400 text-white flex items-center justify-center font-bold text-lg"
                                aria-label="Avatar de {{ block.blocked_user.username }}">
                                {{ block.blocked_user.username|first|upper }}
                            </div>
                        {% endif %}

                        <div>
                            <p class="font-semibold text-gray-900 text-lg">
                                {{ block.blocked_user.username }}
                            </p>
                            <p class="text-sm text-gray-600">
                                BloquÃ© le <time datetime="{{ block.created_at|date:'Y-m-d' }}">{{ block.created_at|date:"d/m/Y" }}</time>
                            </p>
                        </div>
                    </div>

                    <!-- Bouton DÃ©bloquer -->
                    <button
                        type="button"
                        onclick="openUnblockModal('{{ block.blocked_user.id }}', '{{ block.blocked_user.username }}')"
                        class="bg-green-600 hover:bg-green-700 focus:ring-4 focus:ring-green-300 focus:outline-none text-white font-semibold py-2 px-4 rounded-lg transition duration-200 cursor-pointer"
                        aria-label="DÃ©bloquer {{ block.blocked_user.username }}">
                        <span aria-hidden="true">ðŸ”“</span> DÃ©bloquer
                    </button>
                </article>
            {% endfor %}
        </div>
    {% else %}
        <div class="bg-blue-50 border-l-4 border-blue-600 p-6 rounded-lg">
            <p class="text-blue-900">
                <span aria-hidden="true">âœ…</span> Vous n'avez bloquÃ© aucun utilisateur.
            </p>
        </div>
    {% endif %}
</div>

<!-- Modale de confirmation de dÃ©blocage -->
{% include 'accounts/includes/unblock_modal.html' %}

{% endblock %}